schema: '2.0'
stages:
  get_data:
    cmd: python scripts/step_01_collect_data.py
    deps:
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_01_collect_data.py
      md5: 32a5aca28b11ecb40faad4e865ddd9f5
      size: 1596
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    outs:
    - path: artifacts/data_dir/data.csv
      md5: 7e892ba36ef8ab61f939561277e3748c
      size: 532628
  data_preprocess:
    cmd: python scripts/step_03_processed_data.py
    deps:
    - path: artifacts/data_dir/data.csv
      md5: 7e892ba36ef8ab61f939561277e3748c
      size: 532628
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_03_processed_data.py
      md5: d97bf6d2deb4034f89a8cde754adc3de
      size: 5152
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    outs:
    - path: artifacts/model_dir/one_hot_model.pkl
      md5: a6649857e6a97b1212e0c6c08ababc22
      size: 4983
    - path: artifacts/process_local_dir/checking_outliers_after_handling.jpg
      md5: 940fdee632025cf473d04add804c3a72
      size: 155536
    - path: artifacts/process_local_dir/processed_data.csv
      md5: 174e6088f7cb1718b5d4e130996c8fa2
      size: 4082636
  eda_analysis:
    cmd: python scripts/step_02_eda.py
    deps:
    - path: artifacts/data_dir/data.csv
      md5: 7e892ba36ef8ab61f939561277e3748c
      size: 532628
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_02_eda.py
      md5: b14319f9fdc9d637878532b5ca9a14a1
      size: 7743
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    outs:
    - path: artifacts/eda_dir/AQI_impact.jpg
      md5: e1133860c618cebbd18c4f89d4163cc9
      size: 267140
    - path: artifacts/eda_dir/checking_outliers.jpg
      md5: 974d155784f500f8f5e3bb27c97caaf0
      size: 167463
    - path: artifacts/eda_dir/checking_pollutants_over_period.jpg
      md5: 7719f67dbdd4525a9afbfc8c3a8985b0
      size: 264441
    - path: artifacts/eda_dir/correlation_analysis.jpg
      md5: 99700b1f41dbf8b105f5d16b36f96424
      size: 127137
    - path: artifacts/eda_dir/count_AQIBucket.jpg
      md5: 0fb8a5ca028ad3f97875f61caf1c6302
      size: 41860
    - path: artifacts/eda_dir/data_distribution.jpg
      md5: 7a0b659294c10e6c985fa9e0f6f62a32
      size: 239029
    - path: artifacts/eda_dir/descriptive_statistics.csv
      md5: 9f228c9600c7049da48fddcc72bb394c
      size: 725
    - path: artifacts/eda_dir/maximum_concentration.csv
      md5: 80ec951309ffbef15fed258425c6c418
      size: 4139
    - path: artifacts/eda_dir/mean_concentration.csv
      md5: a4d5b0a4cd04717f870cb0478c49f019
      size: 9886
    - path: artifacts/eda_dir/minimum_concentration.csv
      md5: 1310289e5ccd9f1e96684f005ff294ab
      size: 3855
    - path: artifacts/eda_dir/missing_cols_values.csv
      md5: 6970ee0a21bd2193b3fe3458c2880d46
      size: 295
    - path: artifacts/eda_dir/missing_rows_values.csv
      md5: c348bd308de12b85c6aa90e94cce68c0
      size: 44360
    - path: artifacts/eda_dir/pollutants_impact.jpg
      md5: 5ff3ef34820c22dc5cf5e17fae865df3
      size: 754645
  train_test_split:
    cmd: python scripts/step_04_train_test_split.py
    deps:
    - path: artifacts/process_local_dir/processed_data.csv
      md5: 174e6088f7cb1718b5d4e130996c8fa2
      size: 4082636
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_04_train_test_split.py
      md5: 7c8497d9b632225059eff4499b43163d
      size: 4183
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    params:
      params.yaml:
        over_sample.RANDOM_STATE_OVER: 10
        train_test_split.RANDOM_STATE: 10
        train_test_split.TEST_SIZE: 0.15
    outs:
    - path: artifacts/split_data_dir/x_test.csv
      md5: 12f28a08eb0a1d6b96a303d452244ce1
      size: 571002
    - path: artifacts/split_data_dir/x_train.csv
      md5: 31e235096b12a5b066202629dd2aaa8b
      size: 3208522
    - path: artifacts/split_data_dir/x_train_over.csv
      md5: ccbf4f9fd20e0afcc927c200f319d983
      size: 5901089
    - path: artifacts/split_data_dir/y_test.csv
      md5: a7cabf6a2bcd21670abc8f6b0576293d
      size: 1818
    - path: artifacts/split_data_dir/y_train.csv
      md5: 72168dc86264658497d2cc23f07dae38
      size: 10242
    - path: artifacts/split_data_dir/y_train_over.csv
      md5: 278f0e46f5e8f54400f146636b2d7efc
      size: 18840
  model_training:
    cmd: python scripts/step_05_model_training_and_selection.py
    deps:
    - path: artifacts/split_data_dir/x_test.csv
      md5: 12f28a08eb0a1d6b96a303d452244ce1
      size: 571002
    - path: artifacts/split_data_dir/x_train.csv
      md5: 31e235096b12a5b066202629dd2aaa8b
      size: 3208522
    - path: artifacts/split_data_dir/x_train_over.csv
      md5: ccbf4f9fd20e0afcc927c200f319d983
      size: 5901089
    - path: artifacts/split_data_dir/y_test.csv
      md5: a7cabf6a2bcd21670abc8f6b0576293d
      size: 1818
    - path: artifacts/split_data_dir/y_train.csv
      md5: 72168dc86264658497d2cc23f07dae38
      size: 10242
    - path: artifacts/split_data_dir/y_train_over.csv
      md5: 278f0e46f5e8f54400f146636b2d7efc
      size: 18840
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_05_model_training_and_selection.py
      md5: 300ddaf7f3c1baf1044e6904df9fb5ff
      size: 10250
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    params:
      params.yaml:
        model_params.max_depth: 8
        model_params.max_features: 50
        model_params.min_samples_split: 3
        model_params.n_estimators: 150
    outs:
    - path: artifacts/model_dir/model.pkl
      md5: d00c57a86defa3b01af10ee88e7ba9d4
      size: 3313640
    - path: artifacts/over_regressors_scores_dir/classifier_after_oversample.csv
      md5: 126170d5d24e639972f13fab6d6fb19c
      size: 583
    - path: artifacts/over_regressors_scores_dir/classifier_before_oversample.csv
      md5: 76be8b80c58ba1aca177448ae7783db0
      size: 590
    - path: artifacts/over_regressors_scores_dir/regressor_after_oversample.csv
      md5: 594653002c1a369b107007aeeea5ba67
      size: 653
    - path: artifacts/over_regressors_scores_dir/regressor_before_oversample.csv
      md5: 32f144dfb93ebb7cfee73327ab4fa287
      size: 653
  model_valuation:
    cmd: python scripts/step_06_evaluate_model.py
    deps:
    - path: artifacts/model_dir/model.pkl
      md5: d00c57a86defa3b01af10ee88e7ba9d4
      size: 3313640
    - path: artifacts/split_data_dir/x_test.csv
      md5: 12f28a08eb0a1d6b96a303d452244ce1
      size: 571002
    - path: configs/config.yaml
      md5: e8e0e997c674c50db3da0656fa13382c
      size: 1519
    - path: scripts/step_06_evaluate_model.py
      md5: 0d1fc0dff59097c3773569bc08a88dfd
      size: 2446
    - path: scripts/utils/common.py
      md5: f7aeb87182d37200ce0c7b2d7e95ab22
      size: 679
    outs:
    - path: scores.json
      md5: 23ea590ea6c15327dee2f2c4bf7a4145
      size: 145
